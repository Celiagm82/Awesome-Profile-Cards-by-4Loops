const palette1=document.querySelector("#colorPalette1"),palette2=document.querySelector("#colorPalette2"),palette3=document.querySelector("#colorPalette3"),palette4=document.querySelector("#colorPalette4"),userForm=document.querySelector(".fill"),fullName=document.querySelector("#name"),jobPosition=document.querySelector("#job"),emailAddress=document.querySelector("#email"),phoneNumber=document.querySelector("#phone"),linkedin=document.querySelector("#linkedin"),github=document.querySelector("#github"),uploadButton=document.querySelector("#fillButton"),fileField=document.querySelector("#img-selector"),profilePreview=document.querySelector(".empty-box"),previewBackground=document.querySelector(".page__preview"),formsBox=document.querySelector(".panel"),previewCardBox=document.querySelector(".preview__card--box"),previewFullName=document.querySelector(".font__preview--title"),previewJobPosition=document.querySelector(".font__preview--subtitle"),profileImage=document.querySelector(".preview__card--picture"),cardIconMail=document.querySelector(".preview__card--iconEmail"),cardIconPhone=document.querySelector("#preview__card--iconPhone"),cardIconLinkedin=document.querySelector(".preview__card--iconLinkedin"),cardIconGithub=document.querySelector(".preview__card--iconGitHub"),resetButton=document.querySelector(".button_reset"),createCardButton=document.querySelector(".btn-create"),errorMessage=document.querySelector(".error-message"),ButtonShare=document.querySelector(".btn-share"),twitterButtonContainer=document.querySelector(".panel__content2"),printURL=document.querySelector(".print__url--twitter"),twitterCardButton=document.querySelector(".btn-twit"),successMessage=document.querySelector("#success-message");function previewPalette1(){previewCardBox.classList.add("preview__card--box--palette1"),previewCardBox.classList.remove("preview__card--box--palette2"),previewCardBox.classList.remove("preview__card--box--palette3"),previewCardBox.classList.remove("preview__card--box--palette4")}function previewPalette2(){previewCardBox.classList.add("preview__card--box--palette2"),previewCardBox.classList.remove("preview__card--box--palette1"),previewCardBox.classList.remove("preview__card--box--palette3"),previewCardBox.classList.remove("preview__card--box--palette4")}function previewPalette3(){previewCardBox.classList.add("preview__card--box--palette3"),previewCardBox.classList.remove("preview__card--box--palette1"),previewCardBox.classList.remove("preview__card--box--palette2"),previewCardBox.classList.remove("preview__card--box--palette4")}function previewPalette4(){previewCardBox.classList.add("preview__card--box--palette4"),previewCardBox.classList.remove("preview__card--box--palette1"),previewCardBox.classList.remove("preview__card--box--palette2"),previewCardBox.classList.remove("preview__card--box--palette3")}function copyInfoName(e){previewFullName.innerHTML=fullName.value||"Nombre Apellido"}function copyInfoJob(){previewJobPosition.innerHTML=jobPosition.value||"Puesto"}const fr=new FileReader;function getImage(e){let t=e.currentTarget.files[0];fr.addEventListener("load",addImage),fr.readAsDataURL(t)}function addImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,setProfileImage(fr)}function generateClick(){fileField.click()}const video=document.getElementById("video"),snap=document.getElementById("snap"),canvas=document.getElementById("canvas"),errorMsgElement=document.querySelector("span#errorMsg"),constraints={audio:!0,video:{width:200,height:200}};async function init(){try{handleSuccess(await navigator.mediaDevices.getUserMedia(constraints))}catch(e){errorMsgElement.innerHTML=`navigator.getUserMedia error:${e.toString()}`}}function handleSuccess(e){window.stream=e,video.srcObject=e}init();var context=canvas.getContext("2d");function takePhoto(e){e.preventDefault(),console.log("entro"),canvas.classList.remove("hiddenCanvas"),canvas.classList.add("showCanvas"),context.drawImage(video,0,0,200,180);var t=canvas.toDataURL();localStorage.setItem("image",t)}snap.addEventListener("click",takePhoto);const videoWrap=document.querySelector(".video-wrap"),controller=document.querySelector(".controller");function showCamera(e){e.preventDefault(),videoWrap.classList.add("showCamera"),controller.classList.add("showCamera"),videoWrap.classList.remove("hiddenCamera"),controller.classList.remove("hiddenCamera")}function hiddeCamera(){videoWrap.classList.remove("showCamera"),controller.classList.remove("showCamera"),videoWrap.classList.add("hiddenCamera"),controller.classList.add("hiddenCamera")}const cameraButton=document.querySelector("#cameraButton");function showEmailIcon(){""===emailAddress.value&&cardIconMail.classList.add("opacity"),""!==emailAddress.value&&(cardIconMail.classList.remove("opacity"),cardIconMail.classList.remove("hidden-icons"))}function showPhoneIcon(){""===phoneNumber.value&&cardIconPhone.classList.add("opacity"),""!==phoneNumber.value&&(cardIconPhone.classList.remove("opacity"),cardIconPhone.classList.remove("hidden-icons"))}function showLinkedinIcon(){""===linkedin.value&&cardIconLinkedin.classList.add("opacity"),""!==linkedin.value&&(cardIconLinkedin.classList.remove("opacity"),cardIconLinkedin.classList.remove("hidden-icons"))}function showGithubIcon(){""===github.value&&cardIconGithub.classList.add("opacity"),""!==github.value&&(cardIconGithub.classList.remove("opacity"),cardIconGithub.classList.remove("hidden-icons"))}function hideIcons(){""===emailAddress.value&&cardIconMail.classList.add("hidden-icons"),""===phoneNumber.value&&cardIconPhone.classList.add("hidden-icons"),""===linkedin.value&&cardIconLinkedin.classList.add("hidden-icons"),""===github.value&&cardIconGithub.classList.add("hidden-icons")}function changePreviewHeight(){const e=parseInt(formsBox.clientHeight);window.innerWidth<=768?previewBackground.style.height="540px":previewBackground.style.height=e<768?"768px":`${e}px`,window.innerWidth<=768&&window.innerHeight<=768&&(previewBackground.style.paddingTop="38px")}cameraButton.addEventListener("click",showCamera);let userInfo=readUserInfo();function saveSelectedTheme(e){localStorage.setItem("palette",e.currentTarget.value)}function readSavedTheme(){return localStorage.getItem("palette")}function checkSavedTheme(){let e=readSavedTheme();const t=document.querySelectorAll(".input-palette");for(let r of t)r.value===e&&r.setAttribute("checked",!0);printSavedTheme()}function printSavedTheme(){let e=readSavedTheme();document.querySelector(".preview__card--box");"1"===e&&previewPalette1(),"2"===e&&previewPalette2(),"3"===e&&previewPalette3(),"4"===e&&previewPalette4()}function saveUserInfo(e){const t=e.currentTarget.name,r=e.currentTarget.value;userInfo[t]=r,setLocalUserInfo()}function setLocalUserInfo(){localStorage.setItem("userInfo",JSON.stringify(userInfo))}function readUserInfo(){let e=JSON.parse(localStorage.getItem("userInfo"));return null===e?{}:e}function printSavedInfo(){let e=readUserInfo();const t=document.querySelectorAll(".input");for(let r of t)void 0!==e[r.name]?r.value=e[r.name]:r.value="";printInfoToCard()}function printInfoToCard(){let e=readUserInfo();void 0===e.name?previewFullName.innerHTML="Nombre Apellido":previewFullName.innerHTML=e.name,void 0===e.job?previewJobPosition.innerHTML="Puesto":previewJobPosition.innerHTML=e.job,showEmailIcon(),showPhoneIcon(),showLinkedinIcon(),showGithubIcon(),printSavedImage()}function setProfileImage(){profileImage.style.backgroundImage=`url(${fr.result})`;profileImage.style.backgroundImage;localStorage.setItem("image",`${fr.result}`)}function readLocalImage(){return localStorage.getItem("image")}function printSavedImage(){const e=readLocalImage();null!==e?(profileImage.style.backgroundImage=`url(${e})`,profilePreview.style.backgroundImage=`url(${e})`):profileImage.style.backgroundImage="url(https://mir-s3-cdn-cf.behance.net/project_modules/max_1200/e8afef60261411.5a44784a9dcc3.gif)"}function removeLocalInfo(){localStorage.removeItem("userInfo"),localStorage.removeItem("palette"),localStorage.removeItem("image"),profileImage.style.backgroundImage="url(https://mir-s3-cdn-cf.behance.net/project_modules/max_1200/e8afef60261411.5a44784a9dcc3.gif)",profilePreview.style.backgroundImage="url(https://mir-s3-cdn-cf.behance.net/project_modules/max_1200/e8afef60261411.5a44784a9dcc3.gif)"}function resetForm(){document.getElementById("myForm").reset(),document.getElementById("myFormPalette").reset(),resetPreview(),removeCanvas(),hiddeCamera(),removeLocalInfo(),removePic()}function resetPreview(){previewPalette1(),showEmailIcon(),showPhoneIcon(),showLinkedinIcon(),showGithubIcon(),previewFullName.innerHTML="Nombre Apellido",previewJobPosition.innerHTML="Front-end developer"}function removeCanvas(){canvas.classList.add("hiddenCanvas"),canvas.classList.remove("showCanvas")}function removePic(){profileImage.style.backgroundImage="url(https://mir-s3-cdn-cf.behance.net/project_modules/max_1200/e8afef60261411.5a44784a9dcc3.gif)"}let i,coll=document.getElementsByClassName("panel__coll");for(i=0;i<coll.length;i++)coll[i].addEventListener("click",(function(){this.classList.toggle("active");let e=this.nextElementSibling;"inherit"===e.style.display?e.style.display="none":e.style.display="inherit"}));let i2,coll2=document.getElementsByClassName("panel__coll--child");for(i2=0;i2<coll2.length;i2++)coll2[i2].addEventListener("click",(function(){this.classList.toggle("active2");let e=this.nextElementSibling;"inherit"===e.style.display?e.style.display="none":e.style.display="inherit"}));const allFormInputs=document.querySelectorAll(".input-required");function addListenersToInputs(){for(let e of allFormInputs)e.addEventListener("keyup",validateFields)}function validateFields(e){""===fullName.value||""===jobPosition.value||""===emailAddress.value||""===linkedin.value||""===github.value?(event.preventDefault(),createCardButton.disabled=!0,errorMessage.classList.remove("hidden")):(createCardButton.disabled=!1,errorMessage.classList.add("hidden"))}let cardForTwitter;function createInfoObject(){cardForTwitter=readUserInfo(),cardForTwitter.photo=readLocalImage(),cardForTwitter.palette=readSavedTheme(),console.log("cardForTwitter",cardForTwitter),sendRequest()}function sendRequest(){fetch("https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",{method:"POST",body:JSON.stringify(cardForTwitter),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){showURL(e)})).catch((function(e){console.log(e)}))}function showURL(e){twitterButtonContainer.classList.remove("hidden"),twitterCardButton.classList.remove("display__none"),printURL.innerHTML=e.cardURL,printURL.href=e.cardURL}function twitterLink(){const e=document.querySelector(".print__url--twitter").href;twitterCardButton.href=`https://twitter.com/intent/tweet?text=He%20creado%20esta%20tarjeta%20con%20Awesome%20Profile%20Cards:%0A ${e}%0A;hashtags=Adalab, AwesomeProfileCards, promoIdelisa`}createCardButton.addEventListener("click",validateFields),window.addEventListener("load",validateFields),userForm.addEventListener("keyup",validateFields),window.addEventListener("load",validateFields),palette1.addEventListener("click",previewPalette1),palette2.addEventListener("click",previewPalette2),palette3.addEventListener("click",previewPalette3),palette4.addEventListener("click",previewPalette4),fullName.addEventListener("keyup",copyInfoName),jobPosition.addEventListener("keyup",copyInfoJob),uploadButton.addEventListener("click",generateClick),fileField.addEventListener("change",getImage),cameraButton.addEventListener("click",showCamera),emailAddress.addEventListener("keyup",showEmailIcon),phoneNumber.addEventListener("keyup",showPhoneIcon),linkedin.addEventListener("keyup",showLinkedinIcon),github.addEventListener("keyup",showGithubIcon),ButtonShare.addEventListener("click",hideIcons),formsBox.addEventListener("click",changePreviewHeight),window.addEventListener("resize",changePreviewHeight),resetButton.addEventListener("click",resetForm),palette1.addEventListener("click",saveSelectedTheme),palette2.addEventListener("click",saveSelectedTheme),palette3.addEventListener("click",saveSelectedTheme),palette4.addEventListener("click",saveSelectedTheme),fullName.addEventListener("keyup",saveUserInfo),jobPosition.addEventListener("keyup",saveUserInfo),emailAddress.addEventListener("keyup",saveUserInfo),phoneNumber.addEventListener("keyup",saveUserInfo),linkedin.addEventListener("keyup",saveUserInfo),github.addEventListener("keyup",saveUserInfo),window.addEventListener("load",checkSavedTheme),window.addEventListener("load",printSavedInfo),window.addEventListener("load",printSavedImage),fullName.addEventListener("keyup",validateFields),jobPosition.addEventListener("keyup",validateFields),emailAddress.addEventListener("keyup",validateFields),linkedin.addEventListener("keyup",validateFields),github.addEventListener("keyup",validateFields),createCardButton.addEventListener("click",createInfoObject),twitterCardButton.addEventListener("click",twitterLink);